# MyBlog

---

### ëª©ì°¨

1. í”„ë¡œì íŠ¸ ê°œìš”
2. í”„ë¡œì íŠ¸ êµ¬ì¡°
3. ì£¼ìš” ê¸°ëŠ¥ ì†Œê°œ
4. ë°°ìš´ ì  / ì•ìœ¼ë¡œì˜ ê³„íš

---

### 1. í”„ë¡œì íŠ¸ ê°œìš”

- **í”„ë¡œì íŠ¸ ì†Œê°œ**

  - â€œMyBlogâ€ í”„ë¡œì íŠ¸ì—ì„œ ì €ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ê°œë°œì„ í†µí•´ ë§ì€ ê²½í—˜ì„ ìŒ“ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
  - ì„œë²„ ê°œë°œ ì¸¡ë©´ì—ì„œëŠ”, ë‹¨ìˆœí•œ ê²Œì‹œíŒ CRUD êµ¬í˜„ì„ ë„˜ì–´ì„œì„œ, Spring Bootì™€ Spring Data JPAë¥¼ ê¹Šì´ ìˆê²Œ í•™ìŠµí•˜ê³  ìˆ™ë ¨ë„ë¥¼ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì„ ëª©í‘œë¡œ í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, RestAPI ê°œë°œ, Spring Securityë¥¼ í™œìš©í•œ ë³´ì•ˆ ë° ì¸ì¦ ì¸ê°€ ì„œë¹„ìŠ¤ êµ¬í˜„, ê·¸ë¦¬ê³  ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì¸ Redisì˜ í™œìš© ê²½í—˜ì„ ìŒ“ëŠ” ê²ƒ ë˜í•œ ì¤‘ìš”í•œ ëª©í‘œì˜€ìŠµë‹ˆë‹¤.
  - í´ë¼ì´ì–¸íŠ¸ ê°œë°œì—ì„œëŠ” JavaScript ì–¸ì–´ì˜ ìˆ™ë ¨ë„ í–¥ìƒê³¼ React.js ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í™œìš©ì„ ìœ„í•œ í•™ìŠµì„ ì§‘ì¤‘ì ìœ¼ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. ë”ë¶ˆì–´, í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ì•„í‚¤í…ì²˜ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ë©´ì„œ, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì— ëŒ€í•œ ê¹Šì€ ì´í•´ì™€ ê²½í—˜ì„ ìŒ“ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

  

- **í”„ë¡œì íŠ¸ ëª©ì **

  - Java ì–¸ì–´ ìˆ™ë ¨ë„ í–¥ìƒ.
  - RDB, NoSql ì‚¬ìš© ìˆ™ë ¨ë„ í–¥ìƒ.
  - Spring boot , Spring Data JPA (ORM)ë™ì‘ ì›ë¦¬ í•™ìŠµ ë° ì‚¬ìš© ìˆ™ë ¨ë„ í–¥ìƒ.
  - Rest API ì´í•´ì™€ ì‘ìš©
  - Spring Security ë³´ì•ˆ í•™ìŠµ
    - JWT(Json Web Token)ë¥¼ ì‚¬ìš©í•œ ì¸ì¦ ì¸ê°€ êµ¬í˜„
    - Bcryptë¥¼ ì‚¬ìš©í•œ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” êµ¬í˜„
  - FrontEnd í•™ìŠµ
    - Javascript ì–¸ì–´ ìˆ™ë ¨ë„ í–¥ìƒ.
    - React.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë™ì‘ ì›ë¦¬ í•™ìŠµ ë° ì‚¬ìš© ìˆ™ë ¨ë„ í–¥ìƒ.
    - Redux ( ìƒíƒœ ê´€ë¦¬ )
  - Clinet - Serverê°„ ë„¤íŠ¸ì›Œí¬ í†µì‹  í•™ìŠµ
  - Docker ì»¨í…Œì´ë„ˆ ë°°í¬ ê²½í—˜.

---

### 2. í”„ë¡œì íŠ¸ êµ¬ì¡°

![](https://github.com/gusm96/myblog-boot/tree/master/images/Architecture.png)

- Client-Server Architectureë¥¼ ì ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ HTTPí†µì‹ ìœ¼ë¡œ ìš”ì²­ê³¼ ì‘ë‹µì„ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- ServerëŠ” ëª¨ë“  êµ¬ì„±ìš”ì†Œì™€ ê¸°ëŠ¥ì´ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ í†µí•©ëœ **Monolithic Architecture**ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´, ê° ê¸°ëŠ¥ì˜ ìƒí˜¸ì‘ìš©ì´ ì›í™œí•˜ë©°, ê°œë°œê³¼ í…ŒìŠ¤íŠ¸, ë°°í¬ê°€ ê°„í¸í•©ë‹ˆë‹¤.
- ê´€ê³„í˜• ë°ì´í„°ë“¤ì€ JPAë¥¼ í†µí•´ ê´€ë¦¬í•˜ê³  ì—‘ì„¸ìŠ¤ í•©ë‹ˆë‹¤.
- "ê²Œì‹œê¸€ ì¢‹ì•„ìš”"ì™€ ê°™ì€ ë¹ ë¥¸ ì¡°íšŒê°€ í•„ìš”í•œ ë°ì´í„°ëŠ” **Redis**ë¥¼ ì‚¬ìš©í•˜ì—¬ **ë©”ëª¨ë¦¬**ì— ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.

### ë°ì´í„° ëª¨ë¸ë§

![](https://github.com/gusm96/myblog-boot/tree/master/images/ERD.png)

### ğŸ› ï¸ ì‚¬ìš©ëœ ê¸°ìˆ 

- **Backend**
  - Java 17, Spring Boot, Spring Data JPA, MariaDB, Redis
- **Frontend**
  - JavaScript, React.js, Redux
- **DevOps**
  - Docker
- **Tools**
  - Intellj

---

### 3. ì£¼ìš” ê¸°ëŠ¥

1. **JWTë¥¼ ì‚¬ìš©í•œ ì¸ì¦ ì¸ê°€ ì„œë¹„ìŠ¤**

   > RestFulí•œ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ëª©í‘œë¡œ, Spring Securityì™€ JWT (JSON Web Token)ë¥¼ í™œìš©í•˜ì—¬ ì¸ì¦ ë° ì¸ê°€ ê¸°ëŠ¥ì„ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. JWTì˜ ì‚¬ìš©ì€ í´ë¼ì´ì–¸íŠ¸ê°€ í† í°ì˜ ì •ë³´ë¥¼ ì†Œìœ í•¨ìœ¼ë¡œì¨, ì„œë²„ê°€ stateless ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

   - ì‚¬ìš©ì ë¡œê·¸ì¸ ìš”ì²­ì´ ë°œìƒí•˜ë©´, ë¨¼ì € ì‚¬ìš©ì ì •ë³´ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤. ê²€ì¦ì´ ì™„ë£Œë˜ë©´, Access Tokenê³¼ Refresh Tokenì„ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.
   - Refresh Tokenì€ ë³´ì•ˆì„ ìœ„í•´ Http only Cookieì— ì €ì¥í•˜ì—¬, HTTP í†µì‹ ì„ í†µí•´ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í•©ë‹ˆë‹¤.
   - Access Tokenì€ ResponseEntity bodyì— í¬í•¨ì‹œì¼œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜í•©ë‹ˆë‹¤.
   - í´ë¼ì´ì–¸íŠ¸ëŠ” Redux ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ storeì— Access Tokenì„ ë³´ê´€í•©ë‹ˆë‹¤.
   - ê¶Œí•œì„ ìš”êµ¬í•˜ëŠ” ìš”ì²­ì´ ë°œìƒí•˜ë©´, í´ë¼ì´ì–¸íŠ¸ëŠ” HTTP Headerì˜ Authorizationì— Access Tokenì„ í¬í•¨ì‹œì¼œ ìš”ì²­í•©ë‹ˆë‹¤.
   - Access Tokenì´ ë§Œë£Œë˜ë©´, ì„œë²„ì—ì„œ ë§Œë£Œ ì•Œë¦¼ì„ ë³´ë‚´ë©° í´ë¼ì´ì–¸íŠ¸ëŠ” Refresh Tokenì„ ì‚¬ìš©í•´ Access Tokenì„ ì¬ë°œê¸‰ ë°›ìŠµë‹ˆë‹¤.
   - HTTP only Cookieì— ì €ì¥ëœ Refresh Tokenì„ ê²€ì¦í•˜ì—¬ Access Tokenì„ ì¬ë°œê¸‰í•©ë‹ˆë‹¤.
   - Refresh Tokenì´ ë§Œë£Œë˜ë©´, ì¿ í‚¤ì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì— ì•Œë ¤ ê°•ì œ ë¡œê·¸ì•„ì›ƒì„ ì§„í–‰í•©ë‹ˆë‹¤.
   - í† í°ì—ëŠ” ì‚¬ìš©ìì˜ Indexì™€ ê¶Œí•œ(Role) ì •ë³´ë§Œ í¬í•¨ë©ë‹ˆë‹¤. ê´€ë¦¬ì(ADMIN)ì™€ ì¼ë°˜ íšŒì›(NORMAL)ì˜ ê¶Œí•œì— ë”°ë¼ API ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.

2. **ê²Œì‹œê¸€ ì¢‹ì•„ìš” ê¸°ëŠ¥**

   > ê²Œì‹œê¸€ì˜ "ì¢‹ì•„ìš”" ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ RDBMSì— ì§€ì†ì ìœ¼ë¡œ ì ‘ê·¼í•œë‹¤ë©´ DBì˜ íŠ¸ë˜í”½ ë¶€í•˜ì™€ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë” ë¹ ë¥¸ ì¡°íšŒì™€ ì—…ë°ì´íŠ¸ê°€ ê°€ëŠ¥í•˜ë©°, DB íŠ¸ë˜í”½ì„ ì¤„ì¼ ìˆ˜ ìˆëŠ” Redisë¥¼ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

   - ê²Œì‹œê¸€ ì¢‹ì•„ìš” ë°ì´í„°ëŠ” 'BoardLikeCount'ì™€ 'MemberBoardLike' ë‘ ê°€ì§€ë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.

   - 'BoardLikeCount'ëŠ” ê²Œì‹œê¸€ì´ ìƒì„±ë  ë•Œ í•¨ê»˜ ìƒì„±ë˜ë©°, hashKeyë¡œ 'count'ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. 'count'ëŠ” value ê°’ìœ¼ë¡œì„œ ê²Œì‹œê¸€ ì¢‹ì•„ìš” ìˆ˜ë¥¼ incrementí•˜ê±°ë‚˜ decrementí•©ë‹ˆë‹¤.

     ```java
     // BoardLikeCountRedisRepositoryImpl.java
     
     		@Override
         public void save(Long boardId) {
             String key = BOARD_LIKE_COUNT_KEY + boardId;
             hashOperations.put(key, BOARD_LIKE_COUNT_HASH_KEY, 0L);
         }
     
         @Override
         public Long findBoardLikeCount(Long boardId) {
             String key = BOARD_LIKE_COUNT_KEY + boardId;
             return ((Number) hashOperations.get(key, BOARD_LIKE_COUNT_HASH_KEY)).longValue();
         }
     
         @Override
         public void update(Long boardId, Long count) {
             String key = BOARD_LIKE_COUNT_KEY + boardId;
             hashOperations.put(key, BOARD_LIKE_COUNT_HASH_KEY, count);
         }
     ```

   - 'MemberBoardLike'ëŠ” ì‚¬ìš©ìê°€ ê²Œì‹œê¸€ì— ì¢‹ì•„ìš”ë¥¼ ìš”ì²­í•  ë•Œ ìƒì„±ë˜ë©°, Set ë°ì´í„° êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

     ```java
     // MemberBoardLikeRedisRepositoryImpl.java
     
     		@Override
         public void save(Long memberId, Long boardId) {
             String key = MEMBER_BOARD_LIKE_KEY + memberId;
             redisTemplate.opsForSet().add(key, boardId);
         }
     
         @Override
         public boolean isMember(Long memberId, Long boardId) {
             String key = MEMBER_BOARD_LIKE_KEY + memberId;
             return redisTemplate.opsForSet().isMember(key, boardId);
         }
     
     		@Override
         public void delete(Long memberId, Long boardId) {
             String key = MEMBER_BOARD_LIKE_KEY + memberId;
             redisTemplate.opsForSet().remove(key, boardId);
         }
     ```

   - ì‚¬ìš©ìê°€ ê²Œì‹œê¸€ì— ì¢‹ì•„ìš”ë¥¼ ìš”ì²­í•˜ë©´ ê°€ì¥ ë¨¼ì € ê¶Œí•œì„ ê²€ì¦í•©ë‹ˆë‹¤. ê·¸ í›„ ê²Œì‹œê¸€ì˜ ì¡´ì¬ ì—¬ë¶€ì™€ ìš”ì²­í•œ ì‚¬ìš©ìì˜ ê²Œì‹œê¸€ ì¢‹ì•„ìš” ë°ì´í„°ì˜ ì¤‘ë³µ ì—¬ë¶€ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤. ì¤‘ë³µë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê±°ë‚˜, ê¸°ì¡´ ë°ì´í„°ì— ê²Œì‹œê¸€ Index ê°’ì„ Set ë°ì´í„°ì— ì¶”ê°€í•©ë‹ˆë‹¤.

   - ì´í›„ í•´ë‹¹ ê²Œì‹œê¸€ì˜ 'BoardLikeCount'ë¥¼ ì°¾ì•„ì™€ ìš”ì²­ì— ë”°ë¼ increment() ë˜ëŠ” decrement()ë¥¼ ì‹¤í–‰í•˜ê³ , ì´ ì¢‹ì•„ìš” ìˆ˜ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜í•©ë‹ˆë‹¤.

   - í´ë¼ì´ì–¸íŠ¸ëŠ” ë°˜í™˜ ë°›ì€ ì¢‹ì•„ìš” ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
